{
  "// ⚠️ API CONFIGURATION REQUIRED": "Update connection strings and secrets for your environment",
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning",
      "Microsoft.EntityFrameworkCore": "Warning",
      "Azure.Core": "Warning",
      "Azure.Identity": "Warning"
    },
    "ApplicationInsights": {
      "LogLevel": {
        "Default": "Information"
      }
    }
  },
  "ApplicationInsights": {
    "EnableAdaptiveSampling": true,
    "EnableDependencyTrackingTelemetryModule": true,
    "EnablePerformanceCounterCollectionModule": true,
    "EnableQuickPulseMetricStream": true,
    "EnableRequestTrackingTelemetryModule": true,
    "EnableEventCounterCollectionModule": true,
    "// ConnectionString_Note": "⚠️ Set via APPLICATIONINSIGHTS_CONNECTION_STRING environment variable in Azure"
  },
  "Serilog": {
    "Using": ["Serilog.Sinks.Console", "Serilog.Sinks.ApplicationInsights"],
    "MinimumLevel": {
      "Default": "Information",
      "Override": {
        "Microsoft": "Warning",
        "Microsoft.AspNetCore": "Warning",
        "Microsoft.EntityFrameworkCore": "Warning",
        "Azure.Core": "Warning",
        "Azure.Identity": "Warning",
        "System": "Warning"
      }
    },
    "Enrich": ["FromLogContext", "WithMachineName", "WithThreadId", "WithCorrelationId"],
    "Properties": {
      "Application": "Mystira.App.Api"
    }
  },
  "RequestLogging": {
    "ExcludedPaths": ["/health", "/health/ready", "/health/live", "/swagger"],
    "SlowRequestThresholdMs": 3000,
    "LogHeaders": false
  },
  "Resilience": {
    "// Resilience_Note": "Polly v8 resilience configuration via Mystira.Shared.Resilience",
    "RetryCount": 3,
    "RetryBaseDelayMs": 1000,
    "CircuitBreakerFailureThreshold": 5,
    "CircuitBreakerDurationSeconds": 30,
    "TimeoutSeconds": 30
  },
  "Cache": {
    "// Cache_Note": "Distributed caching via Mystira.Shared.Caching",
    "Provider": "Memory",
    "// Provider_Note": "Use 'Redis' for production, 'Memory' for development",
    "DefaultExpirationMinutes": 5,
    "ShortExpirationMinutes": 1,
    "LongExpirationMinutes": 30,
    "EnableCompression": true,
    "CompressionThresholdBytes": 1024,
    "Redis": {
      "ConnectionString": "",
      "// ConnectionString_Note": "⚠️ SECURITY: Load from Azure Key Vault in production",
      "InstanceName": "Mystira:"
    }
  },
  "DistributedLock": {
    "// DistributedLock_Note": "Distributed locking for concurrent operations via Mystira.Shared",
    "Provider": "Memory",
    "// Provider_Note": "Use 'Redis' for production, 'Memory' for development",
    "DefaultExpirySeconds": 30,
    "DefaultWaitSeconds": 10,
    "RetryIntervalMs": 100,
    "KeyPrefix": "lock:",
    "EnableDetailedLogging": false
  },
  "AllowedHosts": "*",
  "ConnectionStrings": {
    "CosmosDb": "",
    "// CosmosDb_Note": "⚠️ SECURITY: NEVER commit secrets to version control! Use Azure Key Vault (recommended) or User Secrets for local development. See docs/setup/SECRETS_MANAGEMENT.md",
    "AzureStorage": "",
    "// AzureStorage_Note": "⚠️ SECURITY: NEVER commit secrets to version control! Use Azure Key Vault (recommended) or User Secrets for local development."
  },
  "Azure": {
    "BlobStorage": {
      "ContainerName": "mystira-app-media",
      "// ContainerName_Note": "⚠️ UPDATE: Change to your blob container name",
      "MaxFileSizeMB": 10
    },
    "CosmosDb": {
      "DatabaseName": "MystiraAppDb",
      "// DatabaseName_Note": "⚠️ UPDATE: Change to your Cosmos DB database name"
    }
  },
  "AzureCommunicationServices": {
    "ConnectionString": "",
    "// ConnectionString_Note": "⚠️ UPDATE: Add your Azure Communication Services connection string",
    "SenderEmail": "",
    "// SenderEmail_Note": "⚠️ UPDATE: Add your verified ACS sender email address (e.g., DoNotReply@mystira.azurecomm.net)"
  },
  "JwtSettings": {
    "// Algorithm_Note": "RS256 asymmetric signing is recommended. Load keys from Azure Key Vault.",
    "RsaPrivateKey": "",
    "// RsaPrivateKey_Note": "⚠️ SECURITY: Load from Azure Key Vault. Never store private keys in config files.",
    "RsaPublicKey": "",
    "// RsaPublicKey_Note": "⚠️ SECURITY: Load from Azure Key Vault or use JwksEndpoint for key rotation.",
    "JwksEndpoint": "https://mystira.ciamlogin.com/a816d461-fbf8-4477-83a6-a62ad74ff28f/discovery/v2.0/keys",
    "// JwksEndpoint_Note": "Entra External ID JWKS endpoint for automatic key rotation. This validates tokens from the PWA.",
    "Issuer": "https://mystira.ciamlogin.com/a816d461-fbf8-4477-83a6-a62ad74ff28f/v2.0",
    "// Issuer_Note": "Entra External ID issuer - must match the 'iss' claim in JWT tokens from PWA",
    "Audience": "<PUBLIC_API_CLIENT_ID>",
    "// Audience_Note": "⚠️ UPDATE: Set to the Public API Client ID from Terraform output (terraform output public_api_client_id)"
  },
  "// App_Note": "⚠️ App status configuration moved to appstatus.json",
  "CorsSettings": {
    "AllowedOrigins": ""
  },
  "InitializeDatabaseOnStartup": true,
  "// InitializeDatabaseOnStartup_Note": "⚠️ Set to true to initialize database on startup (default: false for production). Database containers should be pre-created in Azure Cosmos DB. Use true for local development with in-memory database.",
  "StoryProtocol": {
    "// StoryProtocol_Note": "Story Protocol blockchain integration - see ADR-0010",
    "Enabled": false,
    "// Enabled_Note": "Set to true to enable Story Protocol integration",
    "UseMockImplementation": true,
    "// UseMockImplementation_Note": "Set to false for production to use real blockchain",
    "ContractAddress": "",
    "// ContractAddress_Note": "⚠️ SECURITY: Load from Key Vault. Story Protocol contract address.",
    "RpcUrl": "",
    "// RpcUrl_Note": "⚠️ SECURITY: Load from Key Vault. Ethereum RPC endpoint URL."
  },
  "ChainService": {
    "// ChainService_Note": "gRPC connection to Mystira.Chain (Python) - see ADR-0013",
    "UseGrpc": false,
    "// UseGrpc_Note": "Set to true to use gRPC instead of direct Nethereum (recommended for production)",
    "GrpcEndpoint": "https://localhost:50051",
    "// GrpcEndpoint_Note": "⚠️ UPDATE: Mystira.Chain gRPC endpoint URL",
    "TimeoutSeconds": 120,
    "MaxRetryAttempts": 3,
    "RetryDelayMs": 1000,
    "EnableHealthChecks": true,
    "ApiKey": "",
    "// ApiKey_Note": "⚠️ SECURITY: Load from Key Vault. API key for Chain service authentication."
  },
  "Discord": {
    "// Discord_Note": "Discord bot integration - set Enabled to true to activate",
    "Enabled": false,
    "BotToken": "",
    "// BotToken_Note": "SECURITY: Load from Azure Key Vault in production. Never commit tokens.",
    "GuildId": 0,
    "// GuildId_Note": "Primary guild ID for slash command registration (0 = use RegisterCommandsGlobally)",
    "RegisterCommandsGlobally": false,
    "EnableSlashCommands": true,
    "EnableMessageContentIntent": true,
    "EnableGuildMembersIntent": false,
    "DefaultTimeoutSeconds": 30,
    "MaxRetryAttempts": 3,
    "LogAllMessages": false,
    "CommandPrefix": "!",
    "// Ticketing_Note": "Support ticket system configuration (all IDs are 0 = disabled)",
    "SupportRoleId": 0,
    "SupportCategoryId": 0,
    "SupportArchiveCategoryId": 0,
    "SupportIntakeChannelId": 0,
    "PostSampleTicketOnStartup": false
  },
  "Payments": {
    "// Payments_Note": "Payment gateway configuration - supports multiple providers",
    "Enabled": true,
    "UseMockImplementation": true,
    "// UseMockImplementation_Note": "Set to false for production to use real payment provider",
    "Provider": "PeachPayments",
    "// Provider_Note": "Supported providers: PeachPayments, Stripe, PayFast",
    "DefaultCurrency": "ZAR",
    "WebhookBaseUrl": "",
    "// WebhookBaseUrl_Note": "⚠️ UPDATE: Base URL for payment webhooks (e.g., https://api.mystira.app)",
    "SuccessUrl": "",
    "CancelUrl": "",
    "MaxRetryAttempts": 3,
    "RetryBaseDelayMs": 1000,
    "TimeoutSeconds": 30,
    "PeachPayments": {
      "// PeachPayments_Note": "PeachPayments configuration for South African payments",
      "EntityId": "",
      "// EntityId_Note": "⚠️ SECURITY: Load from Key Vault. PeachPayments merchant entity ID.",
      "AccessToken": "",
      "// AccessToken_Note": "⚠️ SECURITY: Load from Key Vault. PeachPayments API access token.",
      "WebhookSecret": "",
      "// WebhookSecret_Note": "⚠️ SECURITY: Load from Key Vault. Webhook signature verification secret.",
      "BaseUrl": "https://eu-test.oppwa.com",
      "// BaseUrl_Note": "Use 'https://eu-test.oppwa.com' for sandbox, 'https://eu-prod.oppwa.com' for production",
      "Use3DSecure": true,
      "PaymentBrands": ["VISA", "MASTERCARD"],
      "TestMode": true
    }
  },
  "MicrosoftEntraExternalId": {
    "Instance": "https://mystira.ciamlogin.com",
    "Domain": "mystira.onmicrosoft.com",
    "TenantId": "a816d461-fbf8-4477-83a6-a62ad74ff28f",
    "ClientId": "e91aaa4b-a111-42ff-a12e-35c656a18e5c",
    "// ClientId_Note": "⚠️ UPDATE: Set to the Public API Client ID from Terraform output (terraform output public_api_client_id)",
    "Authority": "https://mystira.ciamlogin.com/a816d461-fbf8-4477-83a6-a62ad74ff28f/v2.0",
    "// Authority_Note": "Entra External ID authority for token validation",
    "ValidScopes": ["API.Access", "Profile.Read", "Stories.Read", "Stories.Write"],
    "// ValidScopes_Note": "API scopes exposed by the Public API app registration"
  }
}
